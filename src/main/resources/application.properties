# ========================
# INFORMACIÓN DE LA APP
# ========================
spring.application.name=ReneChardon
server.port=8081

# ========================
# BASE DE DATOS - POSTGRES AWS RDS
# ========================
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/renechardon}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================
# HIKARICP - POOL DE CONEXIONES OPTIMIZADO PARA t4g.micro
# ========================
# Para instancia t4g.micro con carga moderada:
# Fórmula: connections = (cores × 2) + spindle_count
# t4g.micro tiene 2 vCPU -> (2 × 2) + 1 = 5 conexiones máximo
# Pero usamos 8-10 para bursty traffic (carga variable)

spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=ReneChardonPool

# Validación de conexiones (evita conexiones muertas)
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.auto-commit=true

# ========================
# JPA / HIBERNATE
# ========================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ========================
# THYMELEAF (PLANTILLAS)
# ========================
spring.thymeleaf.cache=true
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# ========================
# MAIL / SMTP (GMAIL)
# ========================
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:proyectorenechardon@gmail.com}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ========================
# SEGURIDAD - JWT
# ========================
jwt.secret=${JWT_SECRET:tu-secreto-por-defecto-dev}
jwt.expiration=3600

# ========================
# CLOUDINARY (ALMACENAMIENTO DE IMÁGENES)
# ========================
cloudinary.cloud_name=${CLOUDINARY_CLOUD_NAME:}
cloudinary.api_key=${CLOUDINARY_API_KEY:}
cloudinary.api_secret=${CLOUDINARY_API_SECRET:}

# ========================
# MERCADOPAGO (PAGOS)
# ========================
mercadopago.token=${MERCADOPAGO_TOKEN:}
mercadopago.notification-url=https://tu-dominio.com/webhook
mercadopago.success-url=https://tu-dominio.com/pago-exitoso
mercadopago.failure-url=https://tu-dominio.com/pago-fallido
mercadopago.pending-url=https://tu-dominio.com/pago-pendiente

# ========================
# LOGGING
# ========================
logging.level.root=INFO
logging.level.com.renechardon=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG